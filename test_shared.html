<html lang="">
<script>
    var importObject = {
        js: {
            memory : new WebAssembly.Memory({ initial: 1 }),
            table : new WebAssembly.Table({ initial: 1, element: "anyfunc" })
        }
    };

    Promise.all([
        fetch('build/test_shared0.wasm').then(response =>
            response.arrayBuffer()
        ).then(bytes =>
            WebAssembly.instantiate(bytes, importObject)
        ),
        fetch('build/test_shared1.wasm').then(response =>
            response.arrayBuffer()
        ).then(bytes =>
            WebAssembly.instantiate(bytes, importObject)
    )]).then(function(results) {
        console.log(results[1].instance.exports.doIt());  // prints 42
    });
</script>
</html>
