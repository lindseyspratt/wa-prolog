<html lang="">
<script>
    function consoleLogString(offset, length) {
        var bytes = new Uint8Array(memory.buffer, offset, length);
        var string = new TextDecoder('utf8').decode(bytes);
        console.log(string);
    }

    let memory = new WebAssembly.Memory({initial:1});

    let importObject = { console: { log: consoleLogString }, js: { mem: memory } };

    fetch('build/test_memory.wasm').then(response =>
        response.arrayBuffer()
    ).then(bytes =>
        WebAssembly.instantiate(bytes, importObject)
    ).then(obj => {
        console.log(obj.instance.exports.writeHi());
    });
</script>
</html>
